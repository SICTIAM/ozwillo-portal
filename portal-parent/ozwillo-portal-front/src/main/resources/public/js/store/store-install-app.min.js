var default_org_data={organization:{exist:!1,legal_name:"",sector_type:"",in_activity:!0,alt_name:"",org_type:"",tax_reg_num:"",tax_reg_official_id:"",tax_reg_activity_uri:"",jurisdiction_uri:"",jurisdiction:"",phone_number:"",web_site:"",email:"",street_and_number:"",additional_address_field:"",po_box:"",city:"",city_uri:"",zip:"",cedex:"",country_uri:""},errors:[[],[]],typeRestriction:""},AppModal=React.createClass({displayName:"AppModal",getInitialState:function(){return{app:{rating:0,rateable:!0,tos:"",policy:"",longdescription:"",screenshots:null},orgs:[],selectedOrg:jQuery.extend(!0,{},default_org_data.organization),createOrg:!1,buying:!1,installing:!1,isInstalled:!1,error:!1,step:1}},componentDidMount:function(){$(this.refs.modal.getDOMNode()).on("hide.bs.modal",function(event){history.pushState({},"store",store_root)}.bind(this))},componentDidUpdate:function(){var desc=$(this.getDOMNode()).find(".app-description table");desc.addClass("table table-bordered table-condensed table-striped")},loadApp:function(){$.ajax({url:store_service+"/details/"+this.props.app.type+"/"+this.props.app.id,type:"get",dataType:"json",success:function(data){var state=this.state;state.app=data,this.setState(state)}.bind(this),error:function(xhr,status,err){}.bind(this)})},loadOrgs:function(){$.ajax({url:store_service+"/organizations/"+this.props.app.type+"/"+this.props.app.id,type:"get",dataType:"json",success:function(data){var state=this.state;state.orgs=data,this.setState(state)}.bind(this),error:function(xhr,status,err){}.bind(this)})},open:function(){this.setState(this.getInitialState());var href=store_root+"/"+this.props.app.type+"/"+this.props.app.id;"function"==typeof history.pushState&&history.pushState({},"application",href),this.loadApp(),logged_in&&this.loadOrgs(),this.refs.modal.open()},close:function(){this.state.isInstalled&&(window.location="/my/dashboard")},doInstallApp:function(organization,updateUserData){var state=this.state;state.installing=!1,state.buying=!0,this.setState(state);var request;updateUserData?(request=updateUserData,request.appId=this.props.app.id,request.appType=this.props.app.type):request={appId:this.props.app.id,appType:this.props.app.type},organization&&(request.organizationId=organization),$.ajax({url:store_service+"/buy",type:"post",data:JSON.stringify(request),contentType:"application/json",success:function(data){if(data.success)this.displaySucessfulInstallForm();else{var state=this.state;state.buying=!1,state.error=!0,this.setState(state)}}.bind(this),error:function(xhr,status,err){var state=this.state;state.buying=!1,this.setState(state)}.bind(this)})},orgCreated:function(org){var state=this.state;state.createOrg=!1,org&&this.doInstallApp(org.id),this.setState(state)},cancelCreateOrg:function(){var state=this.state;state.createOrg=!1,this.setState(state)},rateApp:function(rate){$.ajax({url:store_service+"/rate/"+this.props.app.type+"/"+this.props.app.id,type:"post",contentType:"application/json",data:JSON.stringify({rate:rate}),success:function(){var state=this.state;state.app.rateable=!1,state.app.rating=rate,this.setState(state)}.bind(this),error:function(xhr,status,err){}.bind(this)})},displayInstallForm:function(){var state=this.state;state.installing=!0,this.setState(state)},displaySucessfulInstallForm:function(){var state=this.state;state.buying=!1,state.isInstalled=!0,this.setState(state)},continueInstallProcess:function(){var state=this.state;state.installType=this.refs.instalForm.getInstallType();var installData=this.refs.instalForm.getInstallData();if("ORG"===state.installType){var orgSearchData=this.refs.instalForm.getOrgSearchData();orgSearchData.contact_name=installData.contact.contact_name,orgSearchData.contact_lastname=installData.contact.contact_lastname,orgSearchData.contact_email=installData.contact.contact_email,state.selectedOrg.typeInstallOrg=orgSearchData.typeInstallOrg,"NEW-ORGS"===orgSearchData.typeInstallOrg?$.ajax({url:network_service+"/search-organization",type:"get",contentType:"json",data:orgSearchData,success:function(data){data&&!data.exist&&data.sector_type===orgSearchData.sector_type&&data.tax_reg_num===orgSearchData.tax_reg_num&&data.legal_name===orgSearchData.legal_name?(state.installing=!1,state.createOrg=!0,state.selectedOrg=data,state.selectedOrg.inModification=!1,state.errors=[],this.setState(state)):(this.refs.modalError.open(),this.setState(state))}.bind(this),error:function(xhr,status,err){var state=this.state;state.errors=["general"],this.setState(state)}.bind(this)}):(state.installing=!1,this.doInstallApp(orgSearchData.selectedOrgId,orgSearchData))}else{var orgSearchData=this.refs.instalForm.state.installData.address;orgSearchData.contact_name=installData.contact.contact_name,orgSearchData.contact_lastname=installData.contact.contact_lastname,orgSearchData.contact_email=installData.contact.contact_email,this.doInstallApp(null,orgSearchData)}},orgTypeRestriction:function(){return{company:this.props.app.target_companies,public_body:this.props.app.target_publicbodies}},onStepChange:function(stepId){this.setState({step:stepId})},renderCreateNewOrganization:function(){return React.createElement("div",null,React.createElement("h4",null,t("my.network.organization.step")+" "+this.state.step+" / 2"),React.createElement(CreateOrModifyOrganizationForm,{ref:"tabbedForm",successHandler:this.orgCreated,cancelHandler:this.cancelCreateOrg,organization:this.state.selectedOrg,typeRestriction:this.orgTypeRestriction(),step:this.state.step,onStepChange:this.onStepChange,fromStore:!0}))},renderBuying:function(){return React.createElement("h3",null," ",React.createElement("i",{className:"fa fa-spinner fa-spin"})," ",t("buying"))},renderInstallingForm:function(){return React.createElement(InstallForm,{ref:"instalForm",installApp:this.installApp,url:this.state.app.serviceUrl,app:this.props.app,orgs:this.state.orgs,continueInstallProcess:this.continueInstallProcess})},renderAppDescription:function(){return React.createElement(AppDescriptionComponent,{app:this.props.app,stateApp:this.state.app,rateApp:this.rateApp,onInstallButton:this.displayInstallForm,error:this.state.error})},renderSucessfulInstallationForm:function(){return React.createElement("div",null,React.createElement("div",{className:"form-horizontal"},React.createElement("i",{id:"success-app-install",className:"fa fa-check pull-left col-sm-offset-1"}),React.createElement("div",{className:"form-group"},React.createElement("h5",{className:"col-sm-offset-2"},t("install.org.success-msg-1")),React.createElement("br",null)),this.props.app.paid?React.createElement("div",{className:"form-group"},React.createElement("h5",{className:"col-sm-offset-2"},t("install.org.success-msg-2")),React.createElement("br",null)):"","PERSONAL"===this.state.installType?"":React.createElement("div",{className:"form-group"},React.createElement("h5",{className:"col-sm-offset-2"},t("install.org.success-msg-3")),React.createElement("br",null)),React.createElement("div",{className:"form-group"},React.createElement("h5",{className:"col-sm-offset-2"},t("install.org.success-msg-4")),React.createElement("br",null))))},render:function(){var title=this.props.app.name,content=null;return this.state.buying?content=this.renderBuying():this.state.createOrg?(content=this.renderCreateNewOrganization(),title=(this.state.selectedOrg.exist?t("modify-org"):t("create-new-org"))+" "+this.state.selectedOrg.legal_name):content=this.state.installing?this.renderInstallingForm():this.state.isInstalled?this.renderSucessfulInstallationForm():this.renderAppDescription(),React.createElement("div",null,React.createElement(Modal,{ref:"modal",large:!0,infobox:!0,title:title,cancelHandler:this.close},content),React.createElement(Modal,{ref:"modalError",title:t("ui.something_went_wrong_title"),infobox:!0,cancelHandler:null},React.createElement("div",null,React.createElement("h5",null,t("search.organization.cannot-be-used")))))}}),converter=new Showdown.converter({extensions:["table"]}),AppDescriptionComponent=React.createClass({displayName:"AppDescriptionComponent",render:function(){var stateApp=this.props.stateApp,carousel=stateApp.screenshots&&stateApp.screenshots.length>0?React.createElement("div",{className:"row"},React.createElement(Carousel,{images:stateApp.screenshots})):null,error=this.props.error?React.createElement("div",{className:"alert alert-danger alert-dismissible",role:"alert"},React.createElement("button",{type:"button",className:"close","data-dismiss":"alert"},React.createElement("span",{"aria-hidden":"true"},"×"),React.createElement("span",{className:"sr-only"},t("ui.close"))),React.createElement("strong",null,t("sorry"))," ",t("could-not-install-app")):null,rateInfo=null;logged_in&&!stateApp.rateable&&(rateInfo=React.createElement("p",null,t("already-rated")));var launchOrInstallButton,description=converter.makeHtml(stateApp.longdescription);if("service"==this.props.app.type&&this.props.app.installed)launchOrInstallButton=this.props.stateApp&&this.props.stateApp.serviceUrl?React.createElement("a",{className:"btn btn-primary",href:this.props.stateApp.serviceUrl,target:"_new"},t("launch")):React.createElement("label",null," ",React.createElement("i",{className:"fa fa-spinner fa-spin"})," ");else{var installButton=logged_in?React.createElement("button",{className:"btn btn-primary",onClick:this.props.onInstallButton},t("install")):React.createElement("a",{className:"btn btn-primary-inverse",href:store_root+"/login?appId="+this.props.app.id+"&appType="+this.props.app.type},t("install"));launchOrInstallButton=installButton}return React.createElement("div",null,React.createElement("div",{className:"row"},React.createElement("div",{className:"col-sm-1"},React.createElement("img",{src:this.props.app.icon,alt:this.props.app.name})),React.createElement("div",{className:"col-sm-7"},React.createElement("div",null,React.createElement("p",{className:"appname"},this.props.app.name),React.createElement("p",null,t("by")," ",this.props.app.provider))),React.createElement("div",{className:"col-sm-4 center-container install-application"},launchOrInstallButton)),React.createElement("div",{className:"row"},React.createElement(Rating,{rating:stateApp.rating,rateable:stateApp.rateable,rate:this.props.rateApp}),rateInfo),error,carousel,React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-6 app-description",dangerouslySetInnerHTML:{__html:description}}),React.createElement("div",{className:"col-md-6"},React.createElement("p",null,t("agree-to-tos")),React.createElement("p",null,React.createElement("a",{href:stateApp.tos,target:"_new"},t("tos"))),React.createElement("p",null,React.createElement("a",{href:stateApp.policy,target:"_new"},t("privacy"))))))}}),InstallForm=React.createClass({displayName:"InstallForm",getInitialState:function(){return this.getProfileInfo(),{installType:"PERSONAL",errors:[],installData:{contact:{contact_name:"",contact_lastname:"",contact_email:""},address:{exist:!1,street_and_number:"",additional_address_field:"",city:"",zip:"",country_uri:"",cedex:"",po_box:""}}}},getProfileInfo:function(){$.ajax({url:network_service+"/general-user-info",type:"get",contentType:"json",success:function(data){var state=this.state;state.installData.contact.contact_name=data.user_name,state.installData.contact.contact_lastname=data.user_lastname,state.installData.contact.contact_email=data.user_email,data.address&&(state.installData.address.street_and_number=data.address.street_address,state.installData.address.city=data.address.locality,state.installData.address.zip=data.address.postal_code,state.installData.address.country=data.address.country),this.setState(state)}.bind(this),error:function(xhr,status,err){}.bind(this)})},getInstallType:function(){var installTypeRestrictions={personal:this.hasCitizens(),org:this.hasOrganizations()};return"PERSONAL"===this.state.installType&&installTypeRestrictions.personal===!1?"ORG":"ORG"===this.state.installType&&installTypeRestrictions.org===!1?"PERSONAL":this.state.installType},getInstallData:function(){return this.state.installData},getOrgSearchData:function(){return this.refs.setOrgComponent.getOrgSearchData()},isOnlyForCitizens:function(){return this.props.app.target_citizens&&!this.props.app.target_companies&&!this.props.app.target_publicbodies},hasCitizens:function(){return this.props.app.target_citizens},hasOrganizations:function(){return this.props.app.target_companies||this.props.app.target_publicbodies},toggleType:function(event){var installType=this.state.installType;installType=event.target.value,this.setState({installType:installType})},renderInstallType:function(){var installTypeRestrictions={personal:this.hasCitizens(),org:this.hasOrganizations()},installType=this.getInstallType(),personal=installTypeRestrictions.personal?React.createElement("div",{className:"radio col-sm-offset-2"},"  ",React.createElement("label",null,React.createElement("input",{type:"radio",value:"PERSONAL",checked:"PERSONAL"==installType,onChange:this.toggleType},t("install.org.type.PERSONAL"))),"  "):null,org=installTypeRestrictions.org?React.createElement("div",{className:"radio col-sm-offset-2"},"  ",React.createElement("label",null,React.createElement("input",{type:"radio",value:"ORG",checked:"ORG"==installType,onChange:this.toggleType},t("install.org.type.ORG"))),"  "):null,sectorTypeClassName="col-sm-3 control-label ";return sectorTypeClassName=-1!=$.inArray("sector_type",this.props.errors)?sectorTypeClassName+" error":sectorTypeClassName,React.createElement("div",{className:"form-group"},personal,org)},renderLabel:function(htmlFor,class_name,label){var cn=-1!=$.inArray(class_name,this.state.errors)?"col-sm-3 control-label error":"col-sm-3 control-label";return React.createElement("label",{htmlFor:htmlFor,className:cn},label,React.createElement("label",{className:"error"},"*"))},changeInputContact:function(fieldname){return function(event){var org=this.state.installData;org.contact[fieldname]=event.target.value,this.setState({installData:org,errors:[]})}.bind(this)},changeInputAddress:function(fieldname,value,isNumericField){var org=this.state.installData;isNumericField&&""!==value?org.address[fieldname]=-1!==value.trim().search(/^\d+$/)?value.trim():org.address[fieldname]:org.address[fieldname]=value,this.setState({installData:org,errors:[]})},validateContact:function(){var errs=[],contact=this.state.installData.contact;return contact.contact_name&&""!=contact.contact_name.trim()||errs.push("name"),contact.contact_lastname&&""!=contact.contact_lastname.trim()||errs.push("lastname"),contact.contact_email&&""!=contact.contact_email.trim()||errs.push("email"),this.setState({errors:errs}),errs.length>0?!1:!0},validateAddress:function(){var errs=this.state.errors,address=this.state.installData.address;return address.city&&""!=address.city.trim()||errs.push("city"),address.zip&&""!=address.zip.trim()||errs.push("zip"),address.country&&""!=address.country.trim()||errs.push("country"),this.setState({errors:errs}),errs.length<=0},validateAndContinue:function(){var installType=this.getInstallType();"PERSONAL"===installType?this.validateContact()&&this.validateAddress()&&this.props.continueInstallProcess():"ORG"===installType&&this.validateContact()&&this.refs.setOrgComponent&&this.refs.setOrgComponent.validate()&&this.props.continueInstallProcess()},render:function(){var installType=this.getInstallType();return React.createElement("div",{className:"form-horizontal"},this.renderInstallType(),React.createElement("h4",null,t("search.contact.title")),React.createElement(ContactSearchFormControl,{renderLabel:this.renderLabel,orgSearchData:this.state.installData.contact,changeInput:this.changeInputContact}),"PERSONAL"===installType||"service"===this.props.app.type?React.createElement("div",null,React.createElement("h4",null,t("search.contact.address.title")),React.createElement(AddressComponent,{ref:"addressComponent",errors:this.state.errors,addressContainer:this.state.installData.address,changeInput:this.changeInputAddress})):React.createElement("div",null,React.createElement("h4",null,t("search.organization.title")),React.createElement(SetOrganizationComponent,{ref:"setOrgComponent",url:this.props.url,app:this.props.app,orgs:this.props.orgs,isOnlyForCitizens:this.isOnlyForCitizens,onChangeSelectedOrg:this.onChangeSelectedOrg})),React.createElement("a",{className:"btn btn-primary pull-right",onClick:this.validateAndContinue},t("ui.next")))}}),ContactSearchFormControl=React.createClass({displayName:"ContactSearchFormControl",render:function(){return React.createElement("div",{className:"form-group"},React.createElement("div",{className:"form-group"},this.props.renderLabel("contact-name","name",t("search.contact.name")),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",value:this.props.orgSearchData.contact_name,onChange:this.props.changeInput("contact_name"),maxLength:100,placeholder:t("search.contact.name")}))),React.createElement("div",{className:"form-group"},this.props.renderLabel("contact-lastname","lastname",t("search.contact.lastname")),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",value:this.props.orgSearchData.contact_lastname,onChange:this.props.changeInput("contact_lastname"),maxLength:100,placeholder:t("search.contact.lastname")}))),React.createElement("div",{className:"form-group"},this.props.renderLabel("contact-email","email",t("search.contact.email")),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",value:this.props.orgSearchData.contact_email,onChange:this.props.changeInput("contact_email"),maxLength:100,placeholder:t("search.contact.email")}))))}}),OrganizationSearchFormControl=React.createClass({displayName:"OrganizationSearchFormControl",renderType:function(){var restriction=this.props.typeRestriction?this.props.typeRestriction:{company:!0,public_body:!0},public_body=null;restriction.public_body&&(public_body=React.createElement("label",{className:"radio-inline col-sm-3"},React.createElement("input",{type:"radio",value:"PUBLIC_BODY",checked:"PUBLIC_BODY"==this.props.orgSearchData.sector_type,onChange:this.props.toggleType},t("search.organization.sector-type.PUBLIC_BODY"))));var company=null;restriction.company&&(company=React.createElement("label",{className:"radio-inline col-sm-3"},React.createElement("input",{type:"radio",value:"COMPANY",checked:"COMPANY"==this.props.orgSearchData.sector_type,onChange:this.props.toggleType},t("search.organization.sector-type.COMPANY"))));var sectorTypeClassName="col-sm-3 control-label";return sectorTypeClassName=-1!=$.inArray("sector_type",this.props.errors)?sectorTypeClassName+" error":sectorTypeClassName,React.createElement("div",{className:"form-group"},React.createElement("label",{htmlFor:"organization-sector-type",className:sectorTypeClassName},t("search.organization.sector-type")),public_body,company)},render:function(){var label_regNum;switch(this.props.orgSearchData.country){case"България":label_regNum=t("search.organization.business-id.bg");break;case"Italia":label_regNum=t("search.organization.business-id.it");break;case"France":label_regNum=t("search.organization.business-id.fr");break;case"España":label_regNum=t("search.organization.business-id.es");break;case"Türkiye":label_regNum=t("search.organization.business-id.tr");break;default:label_regNum=t("search.organization.business-id.en")}return this.props.orgSearchData.country_uri&&""!==this.props.orgSearchData.country_uri||!this.refs.orgCountrySelect||(this.props.orgSearchData.country_uri=this.refs.orgCountrySelect.getValue(this.props.orgSearchData.country)),React.createElement("div",{className:"form-group"},this.renderType(),React.createElement("div",{className:"form-group"},this.props.renderLabel("organization-country-name","country",t("search.organization.country")),React.createElement("div",{className:"col-sm-5"},React.createElement(CountrySelect,{ref:"orgCountrySelect",className:"form-control",url:store_service+"/dc-countries",defLabel:this.props.orgSearchData.country,onChange:this.props.changeInput("country")}))),React.createElement("div",{className:"form-group"},this.props.renderLabel("organization-name","legal_name",t("search.organization.legal-name")),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",value:this.props.orgSearchData.legal_name,onChange:this.props.changeInput("legal_name"),maxLength:100,placeholder:t("search.organization.legal-name")}))),React.createElement("div",{className:"form-group"},this.props.renderLabel("organization-business-id","tax_reg_num",label_regNum),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",value:this.props.orgSearchData.tax_reg_num,onChange:this.props.changeInput("tax_reg_num"),maxLength:20,placeholder:t(label_regNum)}))))}}),AddressComponent=React.createClass({displayName:"AddressComponent",changeInput:function(fieldname,isNumericField){var changeInput=this.props.changeInput;return function(event){event.added?(changeInput(fieldname,event.added.name,isNumericField),changeInput(fieldname+"_uri",event.target.value,isNumericField)):"country"===fieldname?(changeInput(fieldname,event.target.selectedOptions[0].label,isNumericField),changeInput(fieldname+"_uri",event.target.value,isNumericField),changeInput("city","",isNumericField),changeInput("city_uri","",isNumericField),this.refs.geoSearchCity&&this.refs.geoSearchCity.clear()):changeInput(fieldname,event.target.value,isNumericField)}.bind(this)},render:function(){var address=this.props.addressContainer,addressType=this.props.addressType?this.props.addressType:"";return React.createElement("div",null,React.createElement(Field,{name:"street_and_number",error:-1!=$.inArray("street_and_number",this.props.errors),isRequired:"ORG"==addressType},React.createElement("input",{className:"form-control",id:"street_and_number",type:"text",value:address.street_and_number,onChange:this.changeInput("street_and_number")})),React.createElement(Field,{name:"additional_address_field"},React.createElement("input",{className:"form-control",id:"additional_address_field",type:"text",value:address.additional_address_field,onChange:this.changeInput("additional_address_field")})),"ORG"!==addressType?"":React.createElement(Field,{name:"po_box"},React.createElement("input",{className:"form-control",id:"po_box",type:"text",value:address.po_box,onChange:this.changeInput("po_box")})),React.createElement(Field,{name:"country",class_name_div:"col-sm-5",error:-1!=$.inArray("country",this.props.errors),isRequired:!0},React.createElement(CountrySelect,{className:"form-control",url:store_service+"/dc-countries",value:address.country_uri,defLabel:address.country,onChange:this.changeInput("country"),disabled:this.props.disabled})),React.createElement(Field,{name:"city",error:-1!=$.inArray("city",this.props.errors),isRequired:!0},React.createElement(GeoSingleSelect2Component,{ref:"geoSearchCity",className:"form-control",name:"geoSearchCity",key:address.city,urlResources:store_service+"/dc-cities",onChange:this.changeInput("city"),countryFilter:{country_uri:address.country_uri},placeholder:address.city})),React.createElement(Field,{name:"zip",class_name_div:"col-sm-3",error:-1!=$.inArray("zip",this.props.errors),isRequired:!0},React.createElement("input",{className:"form-control",id:"zip",type:"text",maxLength:6,value:address.zip,onChange:this.changeInput("zip",!0)})),"ORG"!==addressType?"":React.createElement(Field,{name:"cedex",class_name_div:"col-sm-2"},React.createElement("input",{className:"form-control",id:"cedex",type:"cedex",maxLength:3,value:address.cedex,onChange:this.changeInput("cedex",!0)})))}}),Field=React.createClass({displayName:"Field",renderLabel:function(htmlFor,class_name,label,isRequired){var cn=isRequired?React.createElement("label",{className:"error"},"*"):"";return React.createElement("label",{htmlFor:htmlFor,className:class_name},label," ",cn)},render:function(){var className="control-label col-sm-3",classNameDiv="col-sm-7";return this.props.class_name&&(className=this.props.class_name),this.props.error&&(className+=" error"),this.props.class_name_div&&(classNameDiv=this.props.class_name_div),React.createElement("div",{className:"form-group"},this.renderLabel(this.props.name,className,t("my.network.organization."+this.props.name),this.props.isRequired),React.createElement("div",{className:classNameDiv},this.props.children))}}),CountrySelect=React.createClass({displayName:"CountrySelect",propTypes:{url:React.PropTypes.string.isRequired},getInitialState:function(){return{options:[],countries:[]}},onChange:function(event){this.props.onChange(event)},componentDidMount:function(){this.props.url&&$.ajax({url:this.props.url,type:"get",dataType:"json",data:{q:" "},success:function(data){var areas=data.areas,options=[{value:"",label:""}];areas=areas.filter(function(n){return null!==n});for(var i=0;i<areas.length;i++)options.push({value:areas[i].uri,label:areas[i].name});this.state.countries=options,this.successHandler(options)}.bind(this),error:function(xhr,status,err){}.bind(this)})},successHandler:function(data){for(var i=0;i<data.length;i++){var option=data[i];this.state.options.push(React.createElement("option",{className:"action-select-option",key:i,value:option.value},option.label))}this.setState(this.state),this.forceUpdate()},getValue:function(label){if(!label||""!==label)for(var i=0;i<this.state.countries.length;i++)if(this.state.countries[i].label===label)return this.state.countries[i].value;return null},render:function(){var label=this.props.defLabel;return!label||this.props.value&&""!==this.props.value||(this.props.value=this.getValue(label)),React.createElement("select",{className:"btn btn-default dropdown-toggle",onChange:this.onChange,value:this.props.value,disabled:this.props.disabled},this.state.options)}});SetOrganizationComponent=React.createClass({displayName:"SetOrganizationComponent",getInitialState:function(){return{orgSearchData:{contact_name:"",contact_lastname:"",contact_email:"",sector_type:"",country:"France",legal_name:"",tax_reg_num:"",typeInstallOrg:"NEW-ORGS",selectedOrgId:""},errors:[]}},getOrgSearchData:function(){return this.state.orgSearchData},orgTypeRestriction:function(){return{company:this.props.app.target_companies,public_body:this.props.app.target_publicbodies}},onChangeOrgInput:function(fieldname){return function(event){var org=this.state.orgSearchData;"country"===fieldname?(org[fieldname+"_uri"]=event.target.value,org[fieldname]=event.target.selectedOptions[0].label):"tax_reg_num"===fieldname?org[fieldname]=""+event.target.value.replace(/\s+/g,""):org[fieldname]=event.target.value,this.setState({orgSearchData:org,errors:[]})}.bind(this)},toggleInstallOrgType:function(event){var org=this.state.orgSearchData;org.typeInstallOrg=event.target.value,this.setState({orgSearchData:org,errors:[]})},toggleSectorType:function(event){var org=this.state.orgSearchData;org.sector_type=event.target.value,this.setState({orgSearchData:org,errors:[]})},renderOrganizations:function(){var opts=[];return this.props.orgs.map(function(org){opts.push(React.createElement("option",{key:org.id,className:"action-select-option",value:org.id},org.name))}.bind(this)),React.createElement("select",{className:"btn btn-default dropdown-toggle",onChange:this.onChangeOrgInput("selectedOrgId")},opts)},validate:function(){var state=this.state,errors=[],orgSearchData=state.orgSearchData;return"EXISTING-ORGS"===orgSearchData.typeInstallOrg?""===orgSearchData.selectedOrgId.trim()&&errors.push("typeInstallOrg"):(orgSearchData.sector_type&&""!=orgSearchData.sector_type.trim()||errors.push("sector_type"),orgSearchData.country_uri&&""!=orgSearchData.country_uri.trim()||errors.push("country"),orgSearchData.legal_name&&""!=orgSearchData.legal_name.trim()||errors.push("legal_name"),orgSearchData.tax_reg_num&&""!=orgSearchData.tax_reg_num.trim()||errors.push("tax_reg_num")),state.errors=errors,this.setState(state),state.errors.length>0?!1:!0},renderLabel:function(htmlFor,class_name,label){var cn=-1!=$.inArray(class_name,this.state.errors)?"col-sm-3 control-label error":"col-sm-3 control-label";return React.createElement("label",{htmlFor:htmlFor,className:cn},label,React.createElement("label",{className:"error"},"*"))},render:function(){return React.createElement("div",{className:"form-group"},!this.props.isOnlyForCitizens()&&this.props.orgs&&this.props.orgs.length>0?React.createElement("div",{className:"radio col-sm-offset-2"},React.createElement("label",null,React.createElement("input",{type:"radio",value:"EXISTING-ORGS",checked:"EXISTING-ORGS"==this.state.orgSearchData.typeInstallOrg,onChange:this.toggleInstallOrgType}),t("search.organization.selection.existing"),"    "),this.renderOrganizations()):"",React.createElement("div",{className:"radio col-sm-offset-2"},React.createElement("label",null,React.createElement("input",{type:"radio",value:"NEW-ORGS",checked:"NEW-ORGS"==this.state.orgSearchData.typeInstallOrg,onChange:this.toggleInstallOrgType}),t("search.organization.selection.new")),React.createElement(OrganizationSearchFormControl,{errors:this.state.errors,renderLabel:this.renderLabel,typeRestriction:this.orgTypeRestriction(),orgSearchData:this.state.orgSearchData,changeInput:this.onChangeOrgInput,toggleType:this.toggleSectorType})))}});var Carousel=React.createClass({displayName:"Carousel",getInitialState:function(){return{index:0}},back:function(){var index=this.state.index;index=Math.max(0,index-1),this.setState({index:index})},forward:function(){var index=this.state.index;index=Math.min(this.props.images.length,index+1),this.setState({index:index})},render:function(){if(!this.props.images)return null;var back=null;this.state.index>0&&(back=React.createElement("a",{className:"back",onClick:this.back},React.createElement("i",{className:"fa fa-chevron-left"})));var forward=null;return this.state.index<this.props.images.length-1&&(forward=React.createElement("a",{className:"forward",onClick:this.forward},React.createElement("i",{className:"fa fa-chevron-right"}))),React.createElement("div",{className:"carousel"},back,React.createElement("img",{src:this.props.images[this.state.index],alt:this.state.index}),forward)}}),Rating=React.createClass({displayName:"Rating",getInitialState:function(){return{}},startEditing:function(){this.props.rateable&&this.setState({editing:!0,rating:0})},stopEditing:function(){this.setState({editing:!1,rating:0})},rate:function(){this.props.rateable&&this.props.rate(this.state.rating)},mouseMove:function(event){if(this.state.editing){var rect=this.getDOMNode().getBoundingClientRect(),x=Math.floor(8*(event.clientX-rect.left)/rect.width)/2;rect.right-event.clientX<5&&(x=4),this.setState({editing:!0,rating:x})}},render:function(){var className,rating;rating=this.state.editing?this.state.rating:this.props.rating;var rt=1>rating?"0"+10*rating:10*rating;return className="rating-static rating-"+rt,React.createElement("div",{className:className,onMouseEnter:this.startEditing,onMouseLeave:this.stopEditing,onMouseMove:this.mouseMove,onClick:this.rate})}});
