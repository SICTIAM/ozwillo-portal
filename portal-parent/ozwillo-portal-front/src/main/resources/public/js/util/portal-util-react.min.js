var Select2Mixin={getInitialState:function(){return{select2Object:null}},componentDidMount:function(){this.renderSelect2()},componentDidUpdate:function(){},onChange:function(event){var s=this.state;s.value=event.val,this.setState(s),this.props.onChange&&this.props.onChange(event)},clear:function(){var $el=this.state.select2Object;$el.select2("val",null),$el.trigger("change")},renderSelect2:function(){var select2=React.render(React.DOM.input(React.__spread({},this.props)),this.refs.select2div.getDOMNode()),$el=$(select2.getDOMNode());$el.select2(this.props.params);var option=$("<option></option>").text("").val(0);option.appendTo($el),$el.trigger("change"),$el.on("change",this.onChange),this.props.select2Object=$el.data("select2"),this.state.select2Object=$el},render:function(){return React.createElement("div",{ref:"select2div"})}},Select2Component=React.createClass({displayName:"Select2Component",mixins:[Select2Mixin]}),GeoSelect2Mixin={componentWillMount:function(){this.props.params={multiple:!0,allowClear:!0,separator:"|",minimumInputLength:3,ajax:{url:this.props.urlResources,dataType:"json",quietMillis:250,data:function(term,page){return{country_uri:this.props.countryFilter.country_uri,q:term}}.bind(this),results:function(data,page){return{results:data.areas}},cache:!0},formatResult:function(result,container,query,escapeMarkup){return this.formatResultWithTooltip(result,container,query,escapeMarkup)},tooltip:function(area){return area.uri},formatResultWithTooltip:function(result,container,query,escapeMarkup){var markup=[];return this.markMatchWithTooltip(this.text(result),query.term,markup,escapeMarkup,this.tooltip(result)),markup.join("")},markMatchWithTooltip:function(text,term,markup,escapeMarkup,tooltip){var match=window.Select2.util.stripDiacritics(text.toUpperCase()).indexOf(window.Select2.util.stripDiacritics(term.toUpperCase())),tl=term.length;return 0>match?void markup.push(escapeMarkup(text)):(markup.push("<span class='select2-tooltip' title='"+tooltip+"'>"),markup.push(escapeMarkup(text.substring(0,match))),markup.push("</span>"),markup.push("<span class='select2-match select2-tooltip' title='"+tooltip+"'>"),markup.push(escapeMarkup(text.substring(match,match+tl))),markup.push("</span>"),markup.push("<span class='select2-tooltip' title='"+tooltip+"'>"),markup.push(escapeMarkup(text.substring(match+tl,text.length))),void markup.push("</span>"))},text:function(area){return area.name},id:function(area){return area.uri},dropdownCssClass:"bigdrop",escapeMarkup:function(m){return m}}}},GeoMultiSelect2Component=React.createClass({displayName:"GeoMultiSelect2Component",mixins:[GeoSelect2Mixin,Select2Mixin],getInitialState:function(){return{value:[]}},componentWillMount:function(){this.props.params.multiple=!0}}),GeoSingleSelect2Component=React.createClass({displayName:"GeoSingleSelect2Component",mixins:[GeoSelect2Mixin,Select2Mixin],getInitialState:function(){return{value:null}},componentWillMount:function(){this.props.params.multiple=!1,this.props.minimumInputLength&&(this.props.params.minimumInputLength=this.props.minimumInputLength)}});
