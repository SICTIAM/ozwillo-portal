<!doctype html>
<html>
<head data-th-replace="includes/header(title=#{ui.my},page='my')">
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>DUMMY Ozwillo</title>
    <link href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="../public/css/main.css" rel="stylesheet"/>
    <link href="../public/css/my.css" rel="stylesheet"/>
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <style>
        @font-face {
            font-family: 'Dunkin';
            src: url('../public/fonts/Dunkin.eot?') format('eot'),
            url('../public/fonts/Dunkin.woff') format('woff'),
            url('../public/fonts/Dunkin.ttf') format('truetype'),
            url('../public/fonts/Dunkin.svg#Dunkin') format('svg');
        }

        @font-face {
            font-family: 'DIN';
            src: url('../public/fonts/DIN.eot?') format('eot'),
            url('../public/fonts/DIN.woff') format('woff'),
            url('../public/fonts/DIN.ttf') format('truetype'),
            url('../public/fonts/DIN.svg#DIN') format('svg');
        }

        @font-face {
            font-family: 'DINAlternate-Light';
            src: url('../public/fonts/DINAlternate-Light.eot?') format('eot'),
            url('../public/fonts/DINAlternate-Light.woff') format('woff'),
            url('../public/fonts/DINAlternate-Light.ttf') format('truetype'),
            url('../public/fonts/DINAlternate-Light.svg#DIN') format('svg');
        }
    </style>

</head>
<body>
<div class="wrapper">

<div class="navbar navbar-fixed-top my-oasis-navbar" role="navigation" data-th-replace="includes/my-navigation :: nav">
        <div class="navbar-header">

            <div class="my-oasis">
                <img id="logo" data-th-src="@{/img/my/my-oasis.png}" src="../../../../../oasis-portal-core/src/main/resources/public/img/my/my-oasis.png"
                     alt="My OASIS"/>
                <span class="badge badge-notifications" data-th-if="${notificationsCount != 0}" data-th-text="${notificationsCount}">4</span>
            </div>
        </div>
        <ul class="nav navbar-nav oasis-nav" data-th-remove="all-but-first">
            <li class="active" data-th-each="item : ${navigation}" data-th-class="${item.active ? 'active':''}">
                <a href="#" data-th-href="@{'/my/' + ${item.id}}" data-th-class="${item.active?'':'nav-link'}">
                    <img data-th-if="${!item.active}" data-th-src="@{'/img/my/' + ${item.id} + '-gray.png'}" src="../public/img/my/dashboard-gray.png" alt="Dashboard" data-th-alt="#{'my.' + ${item.id}}" class="gray" />
                    <img data-th-src="@{'/img/my/' + ${item.id} + '.png'}" src="../public/img/my/dashboard.png" alt="Dashboard" data-th-alt="#{'my.' + ${item.id}}" data-th-class="${item.active?'':'purple'}" />
                    <span data-th-text="#{'my.' + ${item.id}}">Dashboard</span>
                </a>
                <th:block data-th-if="${item.active}">
                    <div class="arrow-border"></div>
                    <div class="arrow"></div>
                </th:block>
            </li>
            <li>
                <a href="#" class="nav-link">
                    <img class="gray" data-th-src="@{/img/my/profile-gray.png}" src="../public/img/my/profile-gray.png" alt="Profile" />
                    <img class="purple" data-th-src="@{/img/my/profile-gray.png}" src="../public/img/my/profile.png" alt="Profile" />
                    <span>Profile</span>
                </a>
                <div class="arrow-border"></div>
                <div class="arrow"></div>
            </li>
            <li>
                <a href="#" class="nav-link">
                    <img class="gray" data-th-src="@{/img/my/network-gray.png}" src="../public/img/my/network-gray.png" alt="Network" />
                    <img class="purple" data-th-src="@{/img/my/network.png}" src="../public/img/my/network.png" alt="Network" />
                    <span>Network</span>
                </a>
            </li>
            <li>
                <a href="#"  class="nav-link">
                    <img class="gray" data-th-src="@{/img/my/apps-management-gray.png}" src="../public/img/my/appsmanagement-gray.png" alt="Apps Management" />
                    <img class="purple" data-th-src="@{/img/my/apps-management.png}" src="../public/img/my/appsmanagement.png" alt="Apps Management" />
                    <span>My Apps</span>
                </a>
            </li>
        </ul>


</div>

<div class="container">
    <div class="row">
        <div id="dashboard-switcher" class="col-sm-2 text-center dash-switcher" data-th-fragment="dashboard-switcher">
            <img src="../public/img/my/switch-dash.png" data-th-src="@{/img/my/switch-dash.png}" alt="Change dashboard" data-th-alt="#{my.switch-dash}" />
            <p data-th-text="#{my.switch-dash}">Change dashboard</p>
            <ul class="nav nav-pills nav-stacked text-left" id="dashboard_list">
                <li class="active" data-th-each="ctx : ${contexts}" data-th-class="${context.id == ctx.id} ? 'active' : 'inactive'">
                	<a class="dash-switch-link" href="#" data-th-href="@{'/my/dashboard/' + ${ctx.id}}" data-th-data="${ctx.id}">
                		<span data-th-text="${ctx.name}">default</span>
                		<input id="manage-dashboard-btn" type="image" data-th-src="@{/img/icon/btn-edit.png}" src="../../../../../oasis-portal-core/src/main/resources/public/img/icon/btn-edit.png" class="pull-right"
                			data-th-if="${context.id == ctx.id}" />
                	</a>
                </li>
                <li data-th-remove="all"><a href="#">pro</a></li>
                <li id="dashboard_template"><a href="#" class="dash-switch-link" data-th-href="@{/my/dashboard/}">template</a></li>
            </ul>
            <form role="form" id="create-dash" method="POST" action="#" data-th-action="@{/my/dashboard}">
                <input type="hidden" data-th-name="${_csrf.parameterName}" data-th-value="${_csrf.token}"/>
                <div class="form-group">
                    <label for="dashboardname" data-th-text="#{my.create}">+ create new</label>
                    <input type="text" name="dashboardname" id="dashboardname" class="form-control"/>
                </div>
                <div class="text-right">
                    <input type="image" src="../../../../../oasis-portal-core/src/main/resources/public/img/icon/plus.png" data-th-src="@{/img/icon/plus.png}" id="create-dashboard-plus" />
                </div>
            </form>
			            
			<div id="edit-dashboard-modal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
			 <div class="modal-dialog">
			   <div class="modal-content">
			     <div class="modal-header">
			       <button type="button" class="close" data-dismiss="modal">
			       		<span aria-hidden="true">&times;</span>
			       		<span class="sr-only">Close</span>
			       </button>
			       <h4 class="modal-title" data-th-text="#{my.manage} + ' \'' + ${context.name} + '\''">Manage dashboard</h4>
			     </div>
			     <form id="manage-dash" class="form-inline" method="post" action="#" data-th-action="@{/my/dashboard/manage}">
			     	<input type="hidden" data-th-name="${_csrf.parameterName}" data-th-value="${_csrf.token}"/>
			     	
				     <div class="modal-body">
				       <div class="form-group">
		                   <label for="dashboardname" data-th-text="#{my.name}">New name</label>
		                   <input type="text" name="dashboardname" class="form-control" data-th-value="${context.name}" />
			               <input type="hidden" name="dashboardid" data-th-value="${context.id}" />
			               <input type="hidden" name="delete" id="dash-delete-value" />
			           </div>
				       <div class="form-group" data-th-if="${context.isPrimary()}">
				       		<p data-th-text="#{my.delete.primary}"></p>
				       </div>
				     </div>
				     <div class="modal-footer">
				       <button type="button" class="btn btn-default" data-dismiss="modal" data-th-value="#{ui.cancel}">Cancel</button>
				       <button type="submit" class="btn btn-primary" data-th-value="#{ui.save}">Save</button>
				       <button id="dash-delete-btn" type="submit" class="btn btn-primary"
				       		data-th-data="#{my.delete.confirm}"
				       		data-th-if="${not context.isPrimary()}" data-th-value="#{ui.delete}">Delete</button>
				     </div>
			     </form>
			   </div>
			 </div>
			</div>
        </div>

        <div class="col-sm-8">
            <div id="applications" data-th-data="${context.id}" data-th-fragment="dashboard">
                <span class="text-center">
                    <h2 data-th-text="|#{my.dashboard} ${context.name}|">Dashboard</h2>
                </span>

                <div class="app app-icon" data-th-each="entry: ${entries}">
                    <a class="app-link" href="#" data-th-href="${entry.URL}" target="_blank" data-th-id="|app-${entry.catalogEntry.id}|" data-th-attr="data-rawurl=${entry.URL}, data-notifurl=${entry.notificationUrl}">
                        <img src="../public/img/sample_app_icons/sample-connecte-15.png" data-th-src="${entry.iconUrl}"/>
                        <span class="badge badge-notifications"  data-th-text="${entry.notificationsCount}">25</span>
                    </a>
                    <p data-th-text="${entry.name}">Portail citoyen de Valence</p>
                </div>
                <div class="app app-icon" data-th-remove="all">
                    <a class="app-link" href="#" target="_blank">
                        <img src="../public/img/sample_app_icons/sample-connecte-16.png" />
                    </a>
                    <p>Sad sad sad</p>
                </div>
                <div class="app app-icon" data-th-remove="all">
                    <a class="app-link" href="#" target="_blank">
                        <img src="../public/img/sample_app_icons/sample-connecte-17.png" />
                    </a>
                    <p>It's raining</p>
                </div>

                <div class="app app-icon" data-th-remove="all">
                    <a class="app-link" href="#" target="_blank">
                        <img src="../public/img/sample_app_icons/sample-connecte-18.png" />
                    </a>
                    <p>Happy</p>
                </div>

                <div class="app app-icon" data-th-remove="all">
                    <a class="app-link" href="#" target="_blank">
                        <img src="../public/img/sample_app_icons/sample-connecte-19.png" />
                    </a>
                    <p>Sad sad sad</p>
                </div>
                <div class="app app-icon" data-th-remove="all">
                    <a class="app-link" href="#" target="_blank">
                        <img src="../public/img/sample_app_icons/sample-connecte-20.png" />
                    </a>
                    <p>Sad sad sad</p>
                </div>

                <div class="app">
                    <a class="app-link add-more" href="#" data-th-href="@{|/${currentLanguage.locale.language}/store|}">
                        <img src="../../../../../oasis-portal-core/src/main/resources/public/img/icon/plus.png" data-th-src="@{/img/icon/plus.png}" alt="Add" data-th-alt="#{ui.add}"/>
                    </a>
                    <p data-th-text="#{ui.add}">Add</p>
                </div>

            </div>

        </div>
    </div>
</div>

    <div class="push"></div>
</div>


<th:block data-th-replace="includes/footer">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>

</th:block>

<script src="../public/js/my.js" data-th-src="@{/js/my.js}"></script>
<script src="../public/js/dashboard.js" data-th-src="@{/js/dashboard.js}"></script>


</body>
</html>

